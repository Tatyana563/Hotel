TODO:
1) projections with interface  - check
2) return hotels with rooms - done
3) Optimise jpa model, remove redundant ids (Room-hotelId) done

5) Tried to use magic JPA hotelRepository.findHotelNameById(hotelId); - done
6) use Builder or chain accessor instead of constructor with parameters - in case constructor has more 3 parameters -didn't see

8) DB procedure (select ra from RoomAvailability ra where ra.roomId = r.id " +
                            "and ra.end>=:start and ra.start<=:end) done

10) (thymeleaf for email notification) for future;

 13) Spring update to latest; (3.1.4), Java 17 to do; TODO  java 17

15) See only booked by me.to do

16)
owner can see only his property - one controller
admin can see and filter for all ownerIds - another controller
filter by  (dataCreated, dataModified) hotels and rooms
showMyPropertyOnly - for owner
SEt<ownerId> - for admin
in Spring security for endpoints isolate by roles not by annotation hasRole
17) exc look strange to do look at HotelNotFound Exc
*******************************************************************************************************************************
Useful links:
1)see https://blog.tericcabrel.com/write-custom-validator-for-body-request-in-spring-boot/

Notes:
errors in body request  - >400 (some fields are absent, not valid)
not-existent ids as PathVariables - >404

Double check:
1) why is it wrong?
http://localhost:8080/hotel/search?city=Barcelona&starRating=THREE&roomType=DOUBLE&checkIn=05_05_2023&checkOut=08_05_2023
but should be
http://localhost:8080/hotel/search?Barcelona&starRating=THREE&roomType=DOUBLE&checkIn=05_05_2023&checkOut=


QUESTIONS:
Exce handling UserAlreadyCreatedException (flag enabled should be passed?)

QUESTIONS:
Динамические проекции only subclass?
@Repository
public interface AuthorRepository extends CrudRepository<Author, Long> {
    <T> T findByLastName(String lastName, Class<T> type);

    READ:
     read about Spring magic method (count, sum)
}

TODO:
rename check_room_availability -> isRoomAvailable - DONE;

FOR http://localhost:8080/hotel/1/filter?checkIn=2024-05-15&checkOut=2024-05-16  DONE
HotelDTOWithRooms:{
hotelDTO:{},
rooms:[]
}
change the schema and  try to map (mapstruct)


 ClaimsDto claimsDto = (ClaimsDto) authentication.getPrincipal(); should be in Controller, in service only id; DONE but not for annotation;

  @DateTimeFormat doesn't work inside
      public List<HotelCounterDTO> searchAvailableHotels(@ModelAttribute SearchRequest searchRequest) {


    SearchRequestDates.java do the same as SearchRequest  DONE

    compare 2 validators and use ValidateIntervalValidator, get rid of the second  DONE

    *****************************
  1)  can't use smallint in db

  2) room availability empty table
  org.postgresql.util.PSQLException: ERROR: null value in column "room_id" of relation "room_availability" violates not-null constraint
3) cant add comment
4)30 days


TODO:
1) rename table customers_feedback, hotel_rating, room_availability -> RENAME INTO BOOK_REQUEST!, liqubase hotel_rating new schema
2) add to hotel_rating column feedbacks_number, calculate average not by cron job but after adding each comment
3) RatingService //TODO: get avail by id and by userId;
4) init method to insert date in DB - >test

5) optimistic lock with JPA (annotation) see article
6)FOr future - split room_availability into active_request(for search and booking) and finished(for comments, for history)

*****************************************
1) create many hotels:  DONE
 properties: numberoFUsers 10
 hotelsPerUser (1-3),
 roomsPerHotel (from 2-5),
 take names from file or simply add counter in the end test_1, test_2;
 Random param for ENUMS,

 2) fill book_request:
 request to DB - get all rooms;
 duration from 3 to 10 days;
 from 2024 -June 2024;
 - start of the stay in the past, in the past;
 - start of the stay in the past, duration up to tomorrow;
 - start of the stay in the future, duration, end in future;
3) Java method iterate over JSON file with countries and cities and create
      <insert tableName="city">
            <column name="name" value="Milan"/>
            <column name="country" value="Italy"/>
        </insert>
[{"Spain":["Barcelona", "Valencia"]},
{"Ukraine":["Kyiv", "Mykolaiv"]}], DONE!

4) add hotel rating to hotelDTO

5) Add user to Specification and combine 2 methods List<HotelBriefInfo> listAllHotelsBriefInfo(HotelSpecification hotelSpecification);
       List<HotelBriefInfo> listAllHotelsBriefInfoForOwner(int userId);

6)  check if distinct() is copied from RoomSpec
7)  create OwnerSpecification as parent class for HotelSpecification, check that super is called
*******************************************
When running HotelApplicationTest error from UtilsFleProcessing

*********************
1) add example value to open api  - annotation on Entity, description for controller


QUESTIONS:
1) [INFO] New row inserted into city - how to remove from logs???
2) HotelController @@RequestParam?