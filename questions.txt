Plan:
Required to be done:
1) mapstruct, return hotelDTO
2) flyway

Questions:
1) projections with interface
2) return hotels with rooms
3) Optimise jpa model, remove redundant ids (Room-hotelId)

Future plans:
Dynamic query?

TODO:
1) @Mapper(componentModel = "spring", uses=RoomMapper.class)
public interface HotelMapper

    @Mapping(target = "cityName", source = "city.name")
    HotelBriefInfo hotelToHotelBriefInfo(Hotel hotel);


Create separate RoomMapper, CityMapper: rename cityName to city to avoid @Mapping

2) RestController ExceptionHandler, Custom Exc , HotelNotFoundExc extends ResourceNotFoundExc. (in browser how it looks like)


3) Data validation start date < end date; booking?

see https://blog.tericcabrel.com/write-custom-validator-for-body-request-in-spring-boot/
TODO:
4) ExceptionHandler for HotelId (not found in DB, ConstraintViolationException) - ok;
notes:
errors in body request  - >400 (some fields are absent, not valid)
not-existent ids as PathVariables - >404
5) roomcontroller, room_availabiliy check that absent in the table, update table;
6) throw RoomNotFoundException if case room doesn't exist in DB
ExceptionHandler ->404 - BEHAVIOUR is different from HotelNotFoundException
7) room_availability - > booked_rooms (rename+liquibase,flyway)

QUESTIONS:
in bookingResponce add name of the Hotel; Text: You have already booked the room in the hotel from...to....
Tried to use magic JPA hotelRepository.findHotelNameById(hotelId); - doesn't work
http://localhost:8080/rooms/1?checkIn=05_05_2023&checkOut=08_05_2023&=

TODO:
liquibase rollback - done;
add city to the first request - done;
remove ?starRating from the second request
use Builder or chain accessor instead of constructor with parameters;
Enum change in liquibase
all changesets in one file
in booking send email and do email notification after booking

Spring Security, authorisation for booking,
Endpoints to create hotel, room; (special role, Enum role)


**************************
why is it wrong?
http://localhost:8080/hotel/search?city=Barcelona&starRating=THREE&roomType=DOUBLE&checkIn=05_05_2023&checkOut=08_05_2023
but should be
http://localhost:8080/hotel/search?Barcelona&starRating=THREE&roomType=DOUBLE&checkIn=05_05_2023&checkOut=08_05_2023

