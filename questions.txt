TODO:
1) projections with interface
2) return hotels with rooms
3) Optimise jpa model, remove redundant ids (Room-hotelId)
4) Dynamic query?
5) Tried to use magic JPA hotelRepository.findHotelNameById(hotelId);!!!!!!!!!!!!!!!!!!!!!
6) use Builder or chain accessor instead of constructor with parameters - partly done;
7) all changesets in one file
8) DB procedure (select ra from RoomAvailability ra where ra.roomId = r.id " +
                            "and ra.end>=:start and ra.start<=:end) ADD TO LIQUIBASE!!!!
9) Event Driven model
Use : Spring events instead of TransactionSynchronizationManager
EventHandler - send a mail;
10) (thymeleaf);
11) FUTURE:
DB locking/synchronisation while a few microservices work (lock on DB, table with locks)
12) TOGETHER OR SEPARATELY:
    @ExceptionHandler({HotelNotFoundException.class, RoomNotFoundException.class})
 13) Spring update to latest; (3.1.4), Java 17
14) login: we get email password authorisation, get token as a return (access and refresh or at least JWT for a start), don't keep JWT in DB;
JWT token in header for other requests;


PROBLEM: ExceptionHandler doesn't work with security, 403 for everything

15) See only booked by me.


PROBLEM: 401 from Spring security??? now have 403
**********************************************
16)
owner can see only his property - one controller
admin can see and filter for all ownerIds - another controller
filter by  (dataCreated, dataModified) hotels and rooms
showMyPropertyOnly - for owner
SEt<ownerId> - for admin
in Spring security for endpoints isolate by roles not by annotation hasRole
17) exc look strange

Useful links:
1)see https://blog.tericcabrel.com/write-custom-validator-for-body-request-in-spring-boot/

Notes:
errors in body request  - >400 (some fields are absent, not valid)
not-existent ids as PathVariables - >404

Double check:
1) why is it wrong?
http://localhost:8080/hotel/search?city=Barcelona&starRating=THREE&roomType=DOUBLE&checkIn=05_05_2023&checkOut=08_05_2023
but should be
http://localhost:8080/hotel/search?Barcelona&starRating=THREE&roomType=DOUBLE&checkIn=05_05_2023&checkOut=08_05_2023